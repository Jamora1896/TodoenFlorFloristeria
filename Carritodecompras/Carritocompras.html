<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="/Recursos/CSS/Jstyle.css">

    <title>Carrito de compras</title>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="#"><img class="logo" src="/Recursos/Images/Inicio/logo.jpeg"
                        alt="Logo floristeria todo en flor "></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Catalogo
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/Catalogo/Todaocasion.html">Toda Ocasion</a></li>
                                <li><a class="dropdown-item" href="/Catalogo/Cumple.html">Cumpleaños</a></li>
                                <li><a class="dropdown-item" href="/Catalogo/Aniversario,html">Aniversario</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="/NuestraHistoria/Index.html">Nuestra
                                Historia</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Contáctanos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Iniciar Sesión</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page"
                                href="/Carritodecompras/Carritocompras.html">Carrito de Compras</a>
                        </li>
                    </ul>
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search" />
                        <button class="btn btn-outline-success" type="submit">Buscar</button>
                    </form>
                </div>
            </div>
        </nav>
    </header>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div id="carrito-container">
                <h2>Carrito de Compras</h2>
                <ul id="lista-carritos"></ul>
                <p>Total: $<span id="cart-total">0</span></p>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Cargar carrito desde localStorage o crear uno vacío
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

            // Referencias a elementos DOM
            const lista = document.getElementById('lista-carritos');
            const totalSpan = document.getElementById('cart-total');

            // Función para actualizar el carrito en la página y localStorage
            function actualizarCarrito() {
                lista.innerHTML = '';
                let total = 0;

                carrito.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item.nombre} - $${item.precio.toLocaleString()}`;
                    lista.appendChild(li);
                    total += item.precio;
                });

                totalSpan.textContent = total.toLocaleString();
                localStorage.setItem('carrito', JSON.stringify(carrito));
            }

            // Asignar eventos a botones de agregar al carrito
            document.querySelectorAll('.add-to-cart').forEach(boton => {
                boton.addEventListener('click', function (e) {
                    e.preventDefault();
                    const nombre = this.dataset.name;
                    const precio = parseInt(this.dataset.price);

                    carrito.push({ nombre, precio });
                    actualizarCarrito();
                    alert(`${nombre} agregado al carrito`);
                });
            });

            // Mostrar carrito guardado al cargar la página
            actualizarCarrito();
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
</body>

</html>